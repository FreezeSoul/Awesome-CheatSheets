[![返回目录](https://parg.co/UCb)](https://github.com/wxyyxc1992/Awesome-CheatSheet)

In essence, the blockchain is a shared, programmable, cryptographically secure and therefore trusted ledger which no single user controls and which can be inspected by anyone.- Klaus Schwab

区块链技术是最近在互联网技术前沿比较火的一个课题，它的出现解决了在点对点通信中一直存在的一个基本问题，即著名的拜占庭将军问题。通俗地讲就是在一个去中心化的网络中如何对一个信息传递(比如一笔支付)达成全网共识。

区块链本质上是一个去中心化的分布式账本数据库，是比特币的底层技术，和比特币是相伴相生的关系。区块链本身其实是一串使用密码学相关联所产生的数据块，每一个数据块中包含了多次比特币网络交易有效确认的信息。
每当有加密交易产生时，网络中有强大运算能力的矿工(Miner)就开始利用算法解密验证交易，创造出新的区块来记录最新的交易。新的区块按照时间顺序线性地被补充到原有的区块链末端，这个账本就会不停地增长和延长。

通过复杂的公共钥匙和私人钥匙的设置，区块链网络将整个金融网络的所有交易的账本实时广播，实时将交易记录分发到每一个客户端，同时还能保证每个人只能对自己的财产进行修改。当然，账本里也有别人的交易记录，虽然可以看到数值和对应的交易地址(基本上这是由一段冗长的乱序字母和数字组成)，但是如果不借用其他

技术手段也根本无法知道交易者的真实身份。
如果从不同的技术角度来剖析，我们可以这样看待区块链：它是一种数据库、一种分布式系统，也是一种网络底层协议。
(1)数据库。区块链是一种公共数据库，它记录了网际间所有的交易信息，随时更新，让每个用户可以通过合法的手段从中读取信息，写入信息。但又有一套特殊的机制，防止以往的数据被篡改。
(2)分布式系统。区块链是一种分布式系统，它不存储放置在某一两个特定的服务器或安全节点上，而是分布式地存在于网络上所有的完整节点上，在每一个节点保留信息备份。
(3)网络底层协议。区块链是一种共识协议，基于这种协议，可以在其上开发出数目繁多的应用。这些应用在每一时刻都保存一条最长的、最具权威的、共同认可的数据记录，并遵循共同认可的机制进行无须中间权威仲裁的、直接的、点对点的交互信息。

# 区块链的衍化

## 第一代

第一代区块链技术发展出的去中心化、不依赖第三方认证的防止多重支付的技术解决方案，大幅度降低了中间交易和支付费用。另外就是依赖于密码技术，解决了参与方的信任问题。
但是这一代技术，在于哲学思维上对全民选举形成共识机制的过于理想化的坚持，导致了效率的低下。比如比特币的任何交易和支付需要至少 10 分钟才能初步完成(通过改进的其他系统，可以

比特币的区块链应用于价值传递，就是转账，所以最简单的应用就是在金融领域，比如跨境转账，支付汇兑。严格说起来，数字货币其实是区块链最简单、最直接的应用场景。绝大多数的区块链项目，都会有自己的内生代币。

共识机制，就是所有记账节点之间如何区域达成共识，来选择和认定记录的真实性和有效性。全网认可的是最长的一条区块链，因为在此之上的工作量最大。如果想要修改某个区块内的交易信息，就必须将该区块和后面所有区块的信息进行修改。这种共识机制既可以作为认定的手段，又可以避免虚假交易和信息篡改。

## 区块与账本

区块链网络中，数据以文件的形式被永久记录，我们称之为区块。一个区块是一些或所有最新比特币交易的记录集，且未被其他先前的区块记录。区块可以想像为一个城市记录者的记录本上的单独一页纸(对房地产产权的变更记录)或者是股票交易所的总帐本。在绝大多数情况下，新区块被加入到记录最后(在比特币中的名称为：块链)，一旦写上，就再也不能改变或删除。每个区块记录了它被创建之前发生的所有事件。

每个区块包括一些或所有近期交易、前一个区块的引用，以及其他数据。它还包括一个挖矿难度的答案——该答案对每个区块是唯一的。新区块如果没有正确答案，不能被发送到网络中——“挖矿”的过程本质上是在竞争中 “解决”当前区块。每个区块中的数学问题难以解决，但是一旦发现了一个有效解，其他网络节点很容易验证这个解的正确性，对于给定的区块可能有多个有效解，但对于要解决的区块来说只需一个解。
因为每解决一个区块，都会得到新产生的比特币奖励，每个区块包含一个记录，记录中的比特币地址是有权获得比特币奖励的地址。这个纪录被称为生产交易或者 Coinbase 交易，它经常是每个区块的第一个交易。每个区块生产的比特币数量是 50 个，每产生 21 万个区块后减少一半(时间大约是 4 年)。

发送者在网络中广播比特币交易，所有试图解决区块的矿工节点，收集了这些交易记录，把它们加到矿工节点正在解决的区块中。
挖矿难度由比特币网络自动调整，使之实现平均每小时解决 6 个区块的目标。每 2016 个区块(大约两周)后，所有客户端把新区块的实际数目与目标数量相比较，并且按照差异的百分比调整目标 Hash 值，来增加(或降低)产生区块的难度。

## 共识机制与工作量证明

POW：Proof of Work，工作证明。
比特币在 Block 的生成过程中使用了 POW 机制，一个符合要求的 Block Hash 由 N 个前导零构成，零的个数取决于网络的难度值。要得到合理的 Block Hash 需要经过大量尝试计算，计算时间取决于机器的哈希运算速度。当某个节点提供出一个合理的 Block Hash 值，说明该节点确实经过了大量的尝试计算，当然，并不能得出计算次数的绝对值，因为寻找合理 Hash 是一个概率事件。当节点拥有占全网 n% 的算力时，该节点即有 n/100 的概率找到 Block Hash。
POS：Proof of Stake，股权证明。
POS，也称股权证明，类似于财产储存在银行，这种模式会根据你持有数字货币的量和时间，分配给你相应的利息。
简单来说，就是一个根据你持有货币的量和时间，给你发利息的一个制度，在股权证明 POS 模式下，有一个名词叫币龄，每个币每天产生 1 币龄，比如你持有 100 个币，总共持有了 30 天，那么，此时你的币龄就为 3000，这个时候，如果你发现了一个 POS 区块，你的币龄就会被清空为 0。你每被清空 365 币龄，你将会从区块中获得 0.05 个币的利息(假定利息可理解为年利率 5%)，那么在这个案例中，利息 = 3000 \* 5% / 365 = 0.41 个币，这下就很有意思了，持币有利息。

2.  瑞波币(Ripple)
    瑞波币是 Ripple 网络运行的基础货币，就像比特币一样可以在整个网络中流通，而不必局限于熟人圈子。瑞波币引入网关系统，它类似于货币兑换机构，允许人们把法定货币注入、抽离 Ripple 网络，并可充当借贷双方的桥梁。
3.  莱特币(Litecoin)
    莱特币与比特币相比具有三种显著差异：第一，莱特币网络大约每 2.5 分钟(而不是 10 分钟)就可以处理一个块，因此可以提供更快的交易确认；第二，莱特币网络预期产出 8400 万个莱特币，是比特币网络发行货币量的四倍之多；第三，莱特币在其工作量证明算法中使用了由 Colin Percival(科林 · 珀西瓦尔)首次提出的 Scrypt 加密算法，这使得相比于比特币，在普通计算机上进行莱特币挖掘更为容易(在 ASIC 矿机诞生之前)。每一个莱特币被分成 100000000 个更小的单位，通过 8 位小数来界定。不同于比特币，Scrypt 所具有的内存密集特性让莱特币更适合用图形处理器(GPU)进行“挖矿”。为 Scrypt 实施的 FPGA(现场可编辑逻辑门阵列)和 ASIC(专用集成电路)，相比于比特币使用的 sha256，更为昂贵。

## 第二代

### 智能合约

1.以太坊(Ethereum)
以太坊是下一代密码学账本，支持众多的高级功能，包括用户发行货币、智能协议、去中心化的交易、普遍认为的第一个完全的去中心化自治组织(DAOs)或去中心化自治公司(DACs)应用。使以太坊与众不同的是实现这些功能的方式。以太坊并不是把每一单个类型的功能作为特性来特别支持，相反，以太坊包括一个内置的图灵完备的脚本语言，允许通过被称为“合同”的机制来为自己想实现的特性写代码。一个合同就像一个自动的代理，每当接收到一笔交易，合同就会运行特定的一段代码，这段代码能修改合同内部的数据存储或者发送交易。高级的合同甚至能修改自身的代码。

智能合约，完全由代码组成、自动执行的合约。可以自动核查某事是否发生、某物是否存在、某事是否完成等“条件判断”类条款，并据此对资金进行相应的转移。

### 代议制

第二代区块链技术的一个方向就是像美国的 Ripple 公司(详见本书第四章第三节)那样，开始考虑用人民代表大会的代议制度来达成系统共识——就是对各种交易和支付的认定，不是传统中心化的单一中心认定，也不是第一代区块链技术的全民参与认定，而是依靠大家信任的人民代表大会制度来代议。

## 第三代

第三代区块链技术版本的核心用一句话概括，就是变“绝对去中心化”为“有效去中心化”。

# 应用与不足
