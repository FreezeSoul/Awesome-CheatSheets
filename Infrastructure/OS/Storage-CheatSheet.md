[![返回目录](https://parg.co/UCb)](https://github.com/wxyyxc1992/Awesome-CheatSheet)

# 存储与 I/O 必知必会

# I/O

每个外设都是通过读写其寄存器来控制的。外设寄存器也称为I/O端口，通常包括：控制寄存器、状态寄存器和数据寄存器三大类。根据访问外设寄存器的不同方式，可以把CPU分成两大类。一类CPU（如M68K，Power PC等）把这些寄存器看作内存的一部分，寄存器参与内存统一编址，访问寄存器就通过访问一般的内存指令进行，所以，这种CPU没有专门用于设备I/O的指令。这就是所谓的“I/O内存”方式。另一类CPU（典型的如X86），将外设的寄存器看成一个独立的地址空间，所以访问内存的指令不能用来访问这些寄存器，而要为对外设寄存器的读／写设置专用指令，如IN和OUT指令。这就是所谓的“ I/O端口”方式。但是，用于I/O指令的“地址空间”相对来说是很小的，如x86 CPU的I/O空间就只有64KB（0－0xffff)。


内存空间：内存地址寻址范围，32位操作系统内存空间为2的32次幂，即4G。
IO空间：X86特有的一个空间，与内存空间彼此独立的地址空间，32位X86有64K的IO空间。

IO端口：当寄存器或内存位于IO空间时，称为IO端口。一般寄存器也俗称I/O端口,或者说I/O ports,这个I/O端口可以被映射在Memory Space,也可以被映射在I/O Space。

IO内存：当寄存器或内存位于内存空间时，称为IO内存。

# 存储调优

## RAID

RAID 独立磁盘冗余阵列，都是指在利用多块硬盤，做到数据保护或加速的方式;
RAID 0，条带式，对所有硬盤做平均分散的读写，盤愈多速度最快，创建至少需要2颗HD，安全性差。

RAID 1，镜像式，每块盤的上数据都完全相同，创建至少需要2颗HD, 只要留有1颗盤数据都安全，安全性最高。

RAID 5，有1块盤的容量来存放校验码，创建至少需要3颗HD, 可以去除1颗数据都安全。性价比最高。

RAID 10，先做镜像再做条带，创建至少需要4颗HD。可以同时去除半数的盤(但要确认是在镜像保护下的盤)，数据都安全。

raid0 就是把多个（最少2个）硬盘合并成1个逻辑盘使用，数据读写时对各硬盘同时操作，不同硬盘写入不同数据，速度快。

raid1就是同时对2个硬盘读写（同样的数据）。强调数据的安全性。比较浪费。

raid5也是把多个（最少3个）硬盘合并成1个逻辑盘使用，数据读写时会建立奇偶校验信息，并且奇偶校验信息和相对应的数据分别存储于不同的磁盘上。当RAID5的一个磁盘数据发生损坏后，利用剩下的数据和相应的奇偶校验信息去恢复被损坏的数据。相当于raid0和raid1的综合。

raid10就是raid1+raid0，比较适合速度要求高，又要完全容错，当然￥也很多的时候。最少需要4块硬盘（注意：做raid10时要先作RAID1，再把数个RAID1做成RAID0，这样比先做raid0，再做raid1有更高的可靠性）
